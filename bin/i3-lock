#! /bin/bash

xidlehook \
  --not-when-fullscreen \
  --timer normal 180 \
    'notify-send -u normal -t 5000 "LOCKING screen in 30 seconds"' \
    '' \
  `# Undim & lock after 10 more seconds` \
  --timer primary 30 \
    'i3lock -o -e -f' \
    '' \
  --timer normal 600 \
  '[[ $(cat /sys/class/power_supply/BAT0/status) == "Charging" ]] || systemctl suspend' \
    ''
